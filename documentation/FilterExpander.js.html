<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: FilterExpander.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: FilterExpander.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*This class has methods which expand a query by variables which include all literal values for which SPEX has registered filter panes
*/
/**
* Expands a query by variables which catch (space,time,...) literals for which SPEX has registered filter panes
* @class
*  @property {object}  filterDataProperties  - holds the list of prefixes and property chains which link a filter literal to a resource
**/
function FilterExpander(){}
//FilterExpander.prototype.constructor = FilterExpander;

//These are predefined vocabularies for linking well-defined filter literals to instances of interest (by a property chain)
FilterExpander.prototype.filterDataProperties = [];
//Dealing with space
FilterExpander.prototype.filterDataProperties.push({"prefix" : "wgs84", "uri" : "http://www.w3.org/2003/01/geo/wgs84_pos#", "prop" : [ "wgs84:lat"]});
FilterExpander.prototype.filterDataProperties.push({"prefix" : "wgs84", "uri" : "http://www.w3.org/2003/01/geo/wgs84_pos#", "prop" : [ "wgs84:long"]});
FilterExpander.prototype.filterDataProperties.push({"prefix" : "geo", "uri" : "http://www.opengis.net/ont/geosparql#", "prop" : [ "geo:hasGeometry", "geo:asWKT"]});
FilterExpander.prototype.filterDataProperties.push({"prefix" : "geo", "uri" : "http://www.opengis.net/ont/geosparql#", "prop" : [ "geo:hasGeometry",  "geo:asGML"]});
//Dealing with time
FilterExpander.prototype.filterDataProperties.push({"prefix" : "time", "uri" : "http://www.w3.org/2006/time#", "prop" : [ "?timelink","time:hasBeginning", "time:inXSDDateTime"]}); 
FilterExpander.prototype.filterDataProperties.push({"prefix" : "time", "uri" : "http://www.w3.org/2006/time#", "prop" : [ "?timelink", "time:hasEnd",  "time:inXSDDateTime"]}); 
FilterExpander.prototype.filterDataProperties.push({"prefix" : "time", "uri" : "http://www.w3.org/2006/time#", "prop" : [ "?timelink", "xsd:gYear"]}); 

/**This method takes a query and adds for all user selected variables some optional statements which automatically load filter literals by one of the chains of properties defined above
* @function */
FilterExpander.prototype.expandFilterLiterals = function(spexquery){
	for (var i = 0; i &lt; spexquery.SPEXvariables.length; i++) {
        var v = spexquery.SPEXvariables[i]; 
		for (var j = 0; j &lt; this.filterDataProperties.length; j++) {
			var p = this.filterDataProperties[j];
			var opt = spexquery.optional();			
			for (var x = 0; x &lt; p.prop.length; x++) {				
				if (x == 0) { 
					//if (p.prop.length == 2) {
					//add chain with a variable for the first property in the chain (in order to capture cases such as that geo:hasGeometry is not used but some unknown other property)
					//opt.where(v, "?prop", v+"_"+j+"_"+x); 
					//}else{
					opt.where(v, p.prop[x], v+"_"+j+"_"+x);
					 
				} else { 					
					var ll = x - 1;
					opt.where(v+"_"+j+"_"+ll, p.prop[x], v+"_"+j+"_"+x); //property chain									
				}
			}
			opt.end();
		}        
    }
	//return spexquery;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="FilterExpander.html">FilterExpander</a></li><li><a href="FilterResults.html">FilterResults</a></li><li><a href="LabelGenerator.html">LabelGenerator</a></li><li><a href="LiteralExpander.html">LiteralExpander</a></li><li><a href="QueryExecutor.html">QueryExecutor</a></li><li><a href="queryPane.html">queryPane</a></li><li><a href="ResultsPane.html">ResultsPane</a></li><li><a href="slider.html">slider</a></li><li><a href="SpaceFilterPane.html">SpaceFilterPane</a></li><li><a href="spex.html">spex</a></li><li><a href="SPEXQuery.html">SPEXQuery</a></li><li><a href="SPEXResultSet.html">SPEXResultSet</a></li><li><a href="Suggester.html">Suggester</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Tue Sep 23 2014 16:52:30 GMT+0200 (MESZ)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
