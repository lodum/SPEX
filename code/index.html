<!doctype html>
<html lang="en">

<head>
	<meta charset=utf-8 />
	<title>SPEX - Spatio-temporal content explorer</title>

	<script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />

	<link rel="stylesheet" href="css/spex.css">
	<link rel="stylesheet" href="css/map.css">
	<link rel="stylesheet" href="css/queryPane.css">

	<!-- Libraries and resources -->
	<!--<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">-->
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
	
	<!-- 
		!!!This Style Sheet is not available anymore!!!

		<link rel="stylesheet" href="http://jqueryui.com/jquery-wp-content/themes/jqueryui.com/style.css">
	-->

	<link rel="stylesheet" id="themeCSS" href="lib/jQRangeSlider-master/css/classic.css"> 
	<link rel="stylesheet" href="lib/jQRangeSlider-master/demo/style.css">
	
	<link href="lib/bootstrap-3.2.0-dist/css/bootstrap.min.css" rel="stylesheet">
	

	<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
	<!--<script src="http://code.jquery.com/jquery-1.10.2.js"></script>-->
	<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.min.js"></script>
	<!--<script src="http://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>-->
	
	<script src="lib/d3/d3.min.js"></script>
	
	<!-- Slider Begin
	<script src="lib/jQRangeSlider-master/lib/jquery.mousewheel.min.js"></script>

	<script src="lib/jQRangeSlider-master/jQRangeSliderMouseTouch.js"></script>
	<script src="lib/jQRangeSlider-master/jQRangeSliderDraggable.js"></script>
	<script src="lib/jQRangeSlider-master/jQRangeSliderHandle.js"></script>
	<script src="lib/jQRangeSlider-master/jQRangeSliderBar.js"></script>
	<script src="lib/jQRangeSlider-master/jQRangeSliderLabel.js"></script>
	<script src="lib/jQRangeSlider-master/jQRangeSlider.js"></script>

	<script src="lib/jQRangeSlider-master/jQDateRangeSliderHandle.js"></script>
	<script src="lib/jQRangeSlider-master/jQDateRangeSlider.js"></script>
	
	<script src="lib/jQRangeSlider-master/jQEditRangeSliderLabel.js"></script>
	<script src="lib/jQRangeSlider-master/jQEditRangeSlider.js"></script>
	
	
	 Slider End -->

	 <!--timeline-->
	
	<script type="text/javascript" src="lib/timeline/timeline.js"></script>
	<link rel="stylesheet" type="text/css" href="lib/timeline/timeline.css">

	<!--This is the sparql query class we inherit-->
	<script src="lib/jquery-sparql-master/urlEncode.js"></script>
	<script src="lib/jquery-sparql-master/jquery.sparql.js"></script>


	<!--These are our own classes-->
	<script src="js/prefixes.js"></script>
	<script src="js/SPEXQuery.js"></script>
	<script src="js/QueryExecutor.js"></script>
	<script src="js/FilterExpander.js"></script>
	<script src="js/ResultsPane.js"></script>
	<script src="js/LabelGenerator.js"></script>
	<script src="js/LiteralExpander.js"></script>
	<script src="js/SPEXResultSet.js"></script>
	<script src="js/node.js"></script>
	<script src="js/Window.js"></script>
	<script src="js/Time.js"></script>
	<script src="js/Suggester.js"></script>
	<script src="js/SpaceFilterPane.js"></script>
	<script src="js/FilterResults.js"></script>
	<script src="js/ResultItemEventHandler.js"></script>

	<script src="js/queryPane.js"></script>

	<script src="js/map.js"></script>
	<script src="js/slider.js"></script>
	<!--<script src="js/testing.js"></script>-->
	<script src="js/spex.js">	
</script>

	
	

<link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.4/mapbox.css' rel='stylesheet' />
<script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.4/mapbox.js'></script>
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.1.2/leaflet-omnivore.min.js'></script>
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.css' rel='stylesheet' />

<!--set the color of timeline events -->
<style>
  div.timeline-event {
            border-color: blue ! important;            
 }
 .ui-highlight {
		border-color: red ! important;
 }
 .description {
	z-index: 1000;
    display:none;
    position:absolute;
    border:1px solid #000;		
	padding: 6px 8px;
	font: 10px/12px Arial, Helvetica, sans-serif;
	background: white;
	background: rgba(255,255,255,0.8);
	box-shadow: 0 0 15px rgba(0,0,0,0.2);
	border-radius: 5px;
	color: #777;	
}
</style>

<style>
       .ui-autocomplete {
            max-height: 200px;
            overflow-y: auto;
            /* prevent horizontal scrollbar */
            overflow-x: hidden;
            /* add padding to account for vertical scrollbar */
            padding-right: 20px;
        } 
</style>

</head>

<body>

	<div id="navBar_container">
		<div id="navBar">

			<img src="img/spex-logo-nav.png"></img>
			<div id="nav_title">
				Spatio-temporal content explorer
			</div>	

			<div id="nav_right">
				<div id="nav_undo" style="padding:15px">	
					<img id="img_undo" title="Undo last step" src="img/undo.png"></img>
				</div>		
				<div id="nav_buttons">						
					<img id="img_help" title="Help" src="img/help.png"></img>
				</div>

				<div id="nav_endpoint">
					Endpoint:
					<!--<input type="text" id="endpoint" name="endpoint" value="http://data.uni-muenster.de/sparql"></input>-->
					<input type="text" id="endpoint" name="endpoint" value="http://data.uni-muenster.de/historicmaps/sparql"></input> 
					<!--<input type="text" id="endpoint" name="endpoint" value=" http://dbpedia.org/sparql"></input> -->
				</div>
			</div>
		</div>
	</div>

	<div id="page_container">
		<div id="page">
			
			<div id="queryPane">
				
			</div>

		</div>
		
	</div>

	<div id="result_container">
		Results (<a id ="resultsnumber"></a>): <a id="getresults"></a>
		<div id="result" style="width : 100%">
		</div>
		
	</div>

	<div id="right_panel_container">
		
		<div id="right_panel">		
			<!--<br/> Space:<br/>-->
			<div id="map"></div>
			<br>
			<!--
			<input type="button" id="setConstraint" onclick="queryPane.setSpConstraint()" value="Set Constraint">
			<input type="button" id="removeConstraint" onclick="queryPane.removeSpConstraint()" value=" Remove Constraint">
			-->

			<!--<br/> Time (use mouse wheel to zoom in/out):<br/>-->
			<div id="slider" style="width: 100%;height: 150px;font-size: 5pt"></div>
			
		</div>

	</div>

	<div id="debug_query">
				Query:
				<!--<button id="showquery">show query</button>-->
				<!--<button id="addspace">addspace</button>-->
				<!--<button id="addTime">addTime</button>-->
				<!--<button id="showresults">show results</button>--><br>

				<textarea id="query" name="query" style="font-size: 8pt; width: 399px; height: 150px;" readonly></textarea> 
	</div>

	<div id="contextMenu">

	</div>

	<div id="helpDialog" title="SPEX - Help">		
		<h3>About</h2>
		<p>
				Spex is an spatio-temporal exploration and query tool for SPARQL endpoints. It is part of the development in LODUM and LIFE.
				See <a href="http://lodum.de/" target="_blank">http://lodum.de/</a>.
		</p>
		<h3>How to explore and query and endpoint in space and time.</h2>
				<p> This tutorial shows how queries on a given endpoint can be built interactively in SPEX. The endpoint can be entered in the text field on the right.</p>
				<p><img src="img/spex_tut0.png" alt="spex bar" width="100%"></p>
				<p><font color = "red">Note:</font> Red texts warn you that the query is unsuccessful or the endpoint is not responding.</p>
				<br>
				With SPEX, you can build complex queries interactively. For example: show me all battles of Napoleon's invasion to Russia in 1812, 
				together with their place, the number of participants, and the temperature:
				<p><img src="img/invasionexample.png" alt="spex bar" width="100%"></p>
				<br>
		<h4>(1) Start with an empty question (node with question mark).</h4>
			
			<p><img src="img/spex_tut01.png" alt="spex start" width="14%"></p>
			<p>At the beginning, there is only a single node with question mark and without any further restriction, which simply queries for all things that have space or time in them. 
			If there are any results, they are immediately shown below in a table (with node labels as table columns) as well as in the map and the timeline on the right. </p>
			<p><img src="img/spex_tut1.png" alt="spex start" width="100%"></p>
				<br>
			
		<h4>(2) Make your question more specific by selecting a node and opening its context menu.</h4>
			<ul>
				<li>Select a node and open its context menu</li>
				<p><img src="img/spex_tut20.png" alt="spex bar" width="30%"></p>
				<li>Type in text to search for kinds of things (classes).</li>
				<p><img src="img/spex_tut2.png" alt="spex bar" width="30%"></p>
				<li>Press return to restrict query to things of this class (and see how results change).</li>
				<p><img src="img/spex_tut21.png" alt="spex bar" width="14%"></p>
				<li>Add in- or outgoing links to other things.</li>
				<p><img src="img/spex_tut3.png" alt="spex bar" width="30%"></p>
				<li>Type in text to search for links </li>
				<p><img src="img/spex_tut4.png" alt="spex bar" width="65%"></p>
				<li>Press return to add a new edge to the query graph (and see how results change).</li>
				<p><img src="img/spex_tut5.png" alt="spex bar" width="30%"></p>
				<li>Filter results by current map or time window (and see how results change).</li>
				<p><img src="img/spex_tut6.png" alt="spex bar" width="30%"></p>
				<li>Remove filter again.</li>
				<p><img src="img/spex_tut7.png" alt="spex bar" width="30%"></p>
			</ul>
			<br>
		<h4>(3) Explore results.</h4>
			<ul>	
				<li>Zoom into space / time by scrolling mouse over map / time line. </li>
				<p><img src="img/spex_tut8.png" alt="spex bar" width="50%"></p>
				<li>Hover over a map object or time event to reveal the name of the corresponding result.</li>	
				<li>Hover mouse over a result cell to highlight/rezoom to the result in space and time.</li>
				<p><img src="img/spex_tut9.png" alt="spex bar" width="100%"></p>
				<li>Click on a result cell to fix the current result zoom (and double click to release again).</li>
				<li>Click on a result name (URI link) to open its description on the Web.</li>							
			</ul>
			<br>
		<h4>(4) Further restrict query by particular things.</h4>
			<ul>
				<li>Select a question marked node to open its content menu.</li>
				<p><img src="img/spex_tut101.png" alt="spex bar" width="8%"></p>
				<li>Select button "particular things".</li>
				<p><img src="img/spex_tut10.png" alt="spex bar" width="30%"></p>
				<li>Type in text to search for particular things contained in this node and press return.</li>
				<p><img src="img/spex_tut11.png" alt="spex bar" width="100%"></p>
			</ul>
			<br>
		<h4>If you want to know more ....</h4>	
		<p> Every node stands for particular things described in the endpoint. Nodes with question marks are variables that stand for all things that fit into this node. 
			You can add class labels to variable nodes in order to restrict things in that node to a class. Furthermore, you can add links to a node in order to filter out things with links to other things.
			Nodes without question marks stand for one particular thing. Nodes in light green indicate that spatial or temporal information is present, nodes in dark green indicate the contrary.</p>	
			For further information, see...
	</div>
	
	

</body>

</html>
